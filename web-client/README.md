# TaskFlow - Web版客户端

## 📱 项目简介

TaskFlow Web版是专业的个人效率提升工具的浏览器版本，可以在任何支持现代浏览器的设备上使用，与iOS应用通过WebSocket实时同步数据。

### 🎯 主要功能
- ✅ **实时同步**：与iOS应用数据实时同步
- ✅ **任务管理**：创建、编辑、删除、完成任务
- ✅ **分类管理**：学习、运动、娱乐等分类
- ✅ **优先级设置**：高、中、低三级优先级
- ✅ **智能搜索**：实时搜索任务标题、描述、分类
- ✅ **多维筛选**：按状态、分类筛选任务
- ✅ **灵活排序**：按时间、优先级、标题等排序
- ✅ **批量操作**：全部完成、清理已完成任务
- ✅ **逾期提醒**：自动标识逾期任务
- ✅ **统计面板**：实时显示任务统计信息
- ✅ **响应式设计**：支持桌面和移动设备
- ✅ **自动重连**：网络断开时自动重连

### 🌐 技术特性
- **纯前端**：HTML5 + CSS3 + JavaScript
- **WebSocket**：实时双向通信
- **响应式**：适配各种屏幕尺寸
- **iOS风格UI**：采用iOS设计语言
- **现代交互**：模态框、浮动按钮、快捷键
- **智能筛选**：实时搜索、多维筛选、灵活排序
- **跨平台**：支持所有现代浏览器

## 🚀 快速开始

### 方法一：使用启动脚本（推荐）
```bash
# 进入web-client目录
cd web-client

# 运行启动脚本
./start.sh
```

### 方法二：使用Python服务器
```bash
# 进入web-client目录
cd web-client

# 启动Python服务器
python3 server.py

# 或指定端口
python3 server.py --port 8001
```

### 方法三：直接打开文件
```bash
# 直接在浏览器中打开（可能有跨域限制）
open index.html
```

## 📋 使用指南

### 1. 启动Web应用
1. 确保网络连接正常
2. 运行启动脚本或Python服务器
3. 浏览器会自动打开应用页面
4. 检查右上角连接状态（绿色表示已连接）

### 2. 任务管理
#### 创建任务
1. 点击右下角的浮动 + 按钮，或使用快捷键 Ctrl+N
2. 在模态框中填写任务信息
3. 选择分类和优先级
4. 设置截止日期（可选）
5. 点击"添加任务"按钮

#### 管理任务
- **完成任务**：点击任务前的圆圈
- **编辑任务**：点击任务右侧的编辑按钮
- **删除任务**：点击任务右侧的删除按钮
- **搜索任务**：使用顶部搜索框，或按 Ctrl+F
- **筛选任务**：使用筛选按钮（全部、待完成、已完成、分类）
- **排序任务**：使用排序下拉菜单
- **批量操作**：使用侧边栏的快速操作按钮

#### 快捷键
- **Ctrl+N**：添加新任务
- **Ctrl+F**：聚焦搜索框
- **ESC**：关闭模态框

### 3. 实时同步
- Web版与iOS应用数据实时同步
- 在任一设备上的操作会立即反映到其他设备
- 连接状态显示在页面右上角

## 🔧 技术说明

### 文件结构
```
web-client/
├── index.html          # 主页面
├── app.js             # JavaScript逻辑
├── server.py          # Python本地服务器
├── start.sh           # 启动脚本
└── README.md          # 说明文档
```

### WebSocket连接
- **服务器地址**：`ec2-18-183-213-175.ap-northeast-1.compute.amazonaws.com:8082`
- **连接路径**：`/ws`
- **协议**：WebSocket (ws://)
- **心跳机制**：每30秒发送ping保持连接

### 消息格式
```javascript
// 创建任务
{
    type: 'create_task',
    data: {
        title: '任务标题',
        description: '任务描述',
        category: '学习',
        priority: 1,
        due_date: '2025-09-16T10:00:00Z',
        is_completed: false
    }
}

// 更新任务
{
    type: 'update_task',
    data: { /* 完整任务对象 */ }
}

// 删除任务
{
    type: 'delete_task',
    data: { /* 任务对象 */ }
}
```

## 🛠️ 故障排除

### 连接问题
**症状**：右上角显示红色连接状态
**解决方案**：
1. 检查网络连接
2. 确认WebSocket服务器运行正常
3. 刷新页面重新连接

```bash
# 检查WebSocket服务器状态
curl http://ec2-18-183-213-175.ap-northeast-1.compute.amazonaws.com:8082/health
```

### 端口占用
**症状**：启动时提示端口被占用
**解决方案**：
```bash
# 查看端口占用
lsof -i :8000

# 停止占用进程
kill -9 <PID>

# 或使用其他端口
python3 server.py --port 8001
```

### 浏览器兼容性
**支持的浏览器**：
- ✅ Chrome 60+
- ✅ Firefox 55+
- ✅ Safari 11+
- ✅ Edge 79+

**不支持**：
- ❌ Internet Explorer
- ❌ 过旧的移动浏览器

### 跨域问题
如果直接打开HTML文件遇到跨域问题，请使用Python服务器：
```bash
python3 server.py
```

## 📱 移动设备使用

### 在手机/平板上使用
1. 确保设备与Mac在同一网络
2. 获取Mac的IP地址：
   ```bash
   ifconfig | grep "inet " | grep -v 127.0.0.1
   ```
3. 在移动设备浏览器中访问：`http://[Mac的IP]:8000`

### 添加到主屏幕
1. 在Safari中打开Web应用
2. 点击分享按钮
3. 选择"添加到主屏幕"
4. 像原生应用一样使用

## 🔒 安全说明

### 网络安全
- Web应用通过HTTP提供服务（仅限本地网络）
- WebSocket连接未加密（开发环境）
- 不建议在公网环境使用

### 数据安全
- 所有数据存储在服务器端SQLite数据库
- 本地不存储敏感信息
- 与iOS应用共享相同的数据安全级别

## 🎨 自定义配置

### 修改WebSocket服务器地址
编辑 `app.js` 文件中的连接地址：
```javascript
const wsUrl = 'ws://your-server-address:8082/ws';
```

### 修改默认端口
```bash
python3 server.py --port 3000
```

### 自定义样式
编辑 `index.html` 中的CSS样式，或添加外部样式表。

## 📞 技术支持

### 常用命令
```bash
# 检查WebSocket服务器
curl http://ec2-18-183-213-175.ap-northeast-1.compute.amazonaws.com:8082/health

# 查看端口占用
lsof -i :8000

# 启动服务器
python3 server.py

# 查看Python版本
python3 --version
```

### 日志调试
打开浏览器开发者工具（F12），查看Console标签页的日志信息。

### 性能监控
- 连接延迟：通常 < 100ms
- 同步延迟：通常 < 1秒
- 内存使用：通常 < 50MB

## 🔄 更新说明

### 版本历史
- **v1.0.0**：初始版本，基本功能完整
- 支持任务CRUD操作
- 实时WebSocket同步
- 响应式设计

### 未来计划
- [ ] 离线支持
- [ ] 推送通知
- [ ] 主题切换
- [ ] 数据导出
- [ ] 多用户支持

---

**🎉 享受跨平台的任务管理体验！**

如有问题，请查看故障排除部分或检查浏览器控制台日志。
